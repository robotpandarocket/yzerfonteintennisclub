<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yzerfontein Social Tennis Club</title>
    <link rel="icon" type="image/x-icon" href="img/ytc_logo.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7T2LYRGDSV"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-7T2LYRGDSV');
    </script>
    
    <style>
        /* ===== RESET & BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
            padding-bottom: 60px; /* Account for survey banner */
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ===== HEADER & NAVIGATION ===== */
        header {
            background: linear-gradient(135deg, #0494b6 0%, #0384a3 100%);
            color: white;
            padding: 20px 0;
            text-align: center;
            position: relative;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .logo {
            height: 80px;
            width: auto;
        }

        .header-text h1 {
            font-size: 2.5rem;
            font-weight: 300;
            margin-bottom: 5px;
        }

        .header-text p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Language Toggle */
        .language-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            text-decoration: none;
            display: inline-block;
        }

        .language-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
            color: white;
            text-decoration: none;
        }

        /* Navigation */
        nav {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            display: flex;
            justify-content: center;
            padding: 15px 0;
        }

        .nav-links {
            display: flex;
            gap: 30px;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: #2c3e50;
            font-weight: 500;
            padding: 10px 15px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .nav-links a:hover {
            background-color: #0494b6;
            color: white;
        }

        /* Hamburger Menu */
        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 10px;
            background: none;
            border: none;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: #2c3e50;
            margin: 3px 0;
            transition: 0.3s;
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

        /* ===== HERO SECTION ===== */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('img/courts.png');
            background-size: cover;
            background-position: center;
            color: white;
            text-align: center;
            padding: 100px 0;
            margin-bottom: 40px;
        }

        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            font-weight: 300;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
            opacity: 0.9;
        }

        /* ===== MAIN CONTENT ===== */
        main {
            padding: 40px 0;
        }

        .section {
            background: white;
            margin-bottom: 40px;
            padding: 40px;
            padding-top: 60px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .section h2 {
            color: #2c3e50;
            font-size: 2rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #0494b6;
        }

        .section h3 {
            color: #2c3e50;
            font-size: 1.5rem;
            margin: 25px 0 15px 0;
        }

        .section p {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .section ul {
            margin: 15px 0;
            padding-left: 20px;
        }

        .section li {
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        /* ===== COMPONENTS ===== */
        /* Info Cards */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        .info-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            border-left: 4px solid #0494b6;
        }

        .info-card h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #0494b6;
            color: white;
            font-weight: 500;
        }

        tr:hover {
            background-color: #f8f9fa;
        }

        /* Contact Section */
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .contact-item {
            text-align: center;
            padding: 30px 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }

        .contact-item h4 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .contact-item p {
            margin-bottom: 15px;
            font-size: 1rem;
            line-height: 1.6;
        }

        .contact-item strong {
            color: #2c3e50;
            font-weight: 600;
        }

        .contact-item a {
            display: inline-block;
            background: #0494b6;
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 6px;
            margin-top: 15px;
            font-weight: 500;
            transition: background-color 0.3s ease;
        }

        .contact-item a:hover {
            background: #0384a3;
        }

        /* Footer */
        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 30px 0;
            margin-top: 40px;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .footer-logo {
            height: 60px;
            width: auto;
        }

        .footer-text {
            flex: 1;
            text-align: center;
        }

        /* ===== SPECIAL SECTIONS ===== */
        /* Highlights */
        .highlight {
            background: linear-gradient(135deg, #0494b6, #0384a3);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin: 30px 0;
            text-align: center;
        }

        .highlight h3 {
            color: white;
            margin-bottom: 15px;
        }

        /* Rules Section */
        .rules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        .rules-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        .rules-card h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .rules-card ul {
            margin: 0;
            padding-left: 20px;
        }

        .rules-card li {
            margin-bottom: 8px;
            font-size: 1rem;
        }

        /* Social Media */
        .social-media {
            text-align: center;
            margin-top: 20px;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .social-link {
            display: inline-block;
            margin: 0 10px;
            color: #333;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .social-link:hover {
            color: #0494b6;
        }

        .social-link svg {
            width: 24px;
            height: 24px;
            vertical-align: middle;
        }

        /* WhatsApp Updates */
        .whatsapp-updates {
            text-align: center;
            margin-top: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #25d366;
        }

        .whatsapp-updates h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        .whatsapp-updates p {
            margin-bottom: 20px;
            color: #666;
        }

        .whatsapp-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: #25d366;
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 500;
            transition: background-color 0.3s ease;
        }

        .whatsapp-link:hover {
            background: #128c7e;
            color: white;
            text-decoration: none;
        }

        .whatsapp-link i {
            font-size: 1.2rem;
        }

        .contact-whatsapp-link {
            display: inline-flex !important;
            align-items: center;
            gap: 8px;
            background: #25d366 !important;
            color: white !important;
            padding: 8px 16px;
            text-decoration: none;
            font-weight: 500;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }

        .contact-whatsapp-link:hover {
            background: #128c7e !important;
            color: white !important;
            text-decoration: none;
        }

        /* Events iframe container */
        .events-iframe-container {
            position: relative;
            width: 100%;
            min-height: 400px;
            max-height: 800px;
            overflow: hidden;
        }

        .events-iframe-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* ===== SURVEY BANNER ===== */
        .survey-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #25d366, #128c7e);
            color: white;
            padding: 12px 20px;
            text-align: center;
            z-index: 999;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }

        .survey-banner.show {
            transform: translateY(0);
        }

        .survey-banner-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .survey-banner-text {
            font-size: 0.95rem;
            font-weight: 500;
        }

        .survey-banner-link {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .survey-banner-link:hover {
            background: rgba(255, 255, 255, 0.3);
            color: white;
            text-decoration: none;
            transform: translateY(-1px);
        }

        .survey-banner-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .survey-banner-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* ===== MEMBERSHIP WIZARD ===== */
        .wizard-button {
            display: inline-block;
            background: linear-gradient(135deg, #0494b6, #0384a3);
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1rem;
            margin: 20px 0;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(4, 148, 182, 0.3);
        }

        .wizard-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(4, 148, 182, 0.4);
            color: white;
            text-decoration: none;
        }

        .wizard-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .wizard-modal {
            background: white;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .wizard-header {
            background: linear-gradient(135deg, #0494b6, #0384a3);
            color: white;
            padding: 25px 30px;
            border-radius: 15px 15px 0 0;
            text-align: center;
        }

        .wizard-header h3 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .wizard-header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1rem;
        }

        .wizard-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .wizard-close:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .wizard-content {
            padding: 30px;
        }

        .wizard-step {
            display: none;
        }

        .wizard-step.active {
            display: block;
        }

        .wizard-question {
            margin-bottom: 25px;
        }

        .wizard-question h4 {
            color: #2c3e50;
            font-size: 1.3rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .wizard-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .wizard-option {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .wizard-option:hover {
            border-color: #0494b6;
            background: #f8f9fa;
        }

        .wizard-option.selected {
            border-color: #0494b6;
            background: #e3f2fd;
        }

        .wizard-option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.2);
        }

        .wizard-option input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.2);
        }

        .wizard-option label {
            cursor: pointer;
            font-weight: 500;
            color: #2c3e50;
            flex: 1;
        }

        .wizard-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 15px;
        }

        .wizard-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .wizard-btn-secondary {
            background: #6c757d;
            color: white;
        }

        .wizard-btn-secondary:hover {
            background: #5a6268;
        }

        .wizard-btn-primary {
            background: #0494b6;
            color: white;
        }

        .wizard-btn-primary:hover {
            background: #0384a3;
        }

        .wizard-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .wizard-progress {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
        }

        .wizard-progress-step {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e9ecef;
            margin: 0 5px;
            transition: background 0.3s ease;
        }

        .wizard-progress-step.active {
            background: #0494b6;
        }

        .wizard-progress-step.completed {
            background: #28a745;
        }

        .wizard-results {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
        }

        .wizard-results h4 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .wizard-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .wizard-table th {
            background: #0494b6;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        .wizard-table td {
            padding: 12px;
            border-bottom: 1px solid #e9ecef;
        }

        .wizard-table tr:last-child td {
            border-bottom: none;
        }

        .wizard-table .total-row {
            background: #e3f2fd;
            font-weight: 600;
        }

        .wizard-forms {
            margin-top: 25px;
        }

        .wizard-forms h5 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .wizard-forms ul {
            margin: 0;
            padding-left: 20px;
        }

        .wizard-forms li {
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .wizard-forms .highlight {
            background: #e3f2fd;
            color: #1565c0;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }

            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .header-text h1 {
                font-size: 1.8rem;
                text-align: center;
            }

            .logo {
                height: 60px;
            }

            .hero {
                padding: 60px 0;
            }

            .hero h2 {
                font-size: 1.8rem;
                margin-bottom: 15px;
            }

            .hero p {
                font-size: 1rem;
            }

            /* Mobile Navigation */
            .nav-container {
                justify-content: space-between;
                align-items: center;
                padding: 10px 0;
            }

            .hamburger {
                display: flex;
            }

            .nav-links {
                position: fixed;
                top: 70px;
                left: -100%;
                width: 100%;
                height: calc(100vh - 70px);
                background: white;
                flex-direction: column;
                gap: 0;
                transition: left 0.3s ease;
                box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            }

            .nav-links.active {
                left: 0;
            }

            .nav-links a {
                padding: 20px 25px;
                border-bottom: 1px solid #eee;
                border-radius: 0;
                text-align: left;
                font-size: 1.1rem;
                min-height: 60px;
                display: flex;
                align-items: center;
            }

            .nav-links a:hover {
                background-color: #f8f9fa;
                color: #2c3e50;
            }

            .section {
                padding: 25px 20px;
                padding-top: 50px;
                margin-bottom: 30px;
            }

            .section h2 {
                font-size: 1.6rem;
                margin-bottom: 15px;
            }

            .section h3 {
                font-size: 1.3rem;
                margin: 20px 0 10px 0;
            }

            .section p {
                font-size: 1rem;
                margin-bottom: 12px;
            }

            .info-grid {
                grid-template-columns: 1fr;
                gap: 20px;
                margin: 20px 0;
            }

            .info-card {
                padding: 20px;
            }

            .info-card h4 {
                font-size: 1.2rem;
                margin-bottom: 12px;
            }

            .rules-grid {
                grid-template-columns: 1fr;
                gap: 20px;
                margin: 20px 0;
            }

            .rules-card {
                padding: 20px;
            }

            .contact-grid {
                grid-template-columns: 1fr;
                gap: 20px;
                margin-top: 20px;
            }

            .contact-item {
                padding: 25px 20px;
            }

            .contact-item h4 {
                font-size: 1.3rem;
                margin-bottom: 15px;
            }

            .contact-item a {
                padding: 10px 20px;
                font-size: 0.9rem;
            }

            table {
                font-size: 0.9rem;
            }

            th, td {
                padding: 8px;
            }

            .footer-content {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }

            .footer-logo {
                height: 50px;
            }

            .highlight {
                padding: 20px;
                margin: 20px 0;
            }

            .highlight h3 {
                font-size: 1.3rem;
            }

            /* Mobile survey banner adjustments */
            .survey-banner {
                padding: 10px 15px;
            }

            .survey-banner-content {
                flex-direction: column;
                gap: 10px;
            }

            .survey-banner-text {
                font-size: 0.9rem;
            }

            .survey-banner-link {
                padding: 6px 12px;
                font-size: 0.85rem;
            }

            /* Adjust body padding for mobile */
            body {
                padding-bottom: 80px;
            }

            /* Mobile wizard adjustments */
            .wizard-modal {
                width: 95%;
                margin: 20px;
            }

            .wizard-content {
                padding: 20px;
            }

            .wizard-header {
                padding: 20px;
            }

            .wizard-header h3 {
                font-size: 1.3rem;
            }

            .wizard-navigation {
                flex-direction: column;
            }

            .wizard-btn {
                width: 100%;
            }

            .wizard-table {
                font-size: 0.9rem;
            }

            .wizard-table th,
            .wizard-table td {
                padding: 8px;
            }
        }

        @media (max-width: 480px) {
            .header-text h1 {
                font-size: 1.5rem;
            }

            .hero h2 {
                font-size: 1.5rem;
            }

            .section h2 {
                font-size: 1.4rem;
            }

            .section h3 {
                font-size: 1.2rem;
            }

            .nav-links a {
                padding: 10px 12px;
                font-size: 0.9rem;
            }

            .container {
                padding: 0 10px;
            }

            .section {
                padding: 20px 15px;
                padding-top: 45px;
            }
        }
    </style>
    <!-- Open Graph / Social Sharing -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.yzerfonteintennis.co.za/">
    <meta property="og:title" content="Yzerfontein Social Tennis Club">
    <meta property="og:description" content="Join our friendly tennis community in Yzerfontein! Social tennis, membership info, events, and more.">
    <meta property="og:image" content="https://www.yzerfonteintennis.co.za/img/ytc_logo.png">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <img src="img/ytc_logo.png" alt="Yzerfontein Tennis Club Logo" class="logo">
                <div class="header-text">
                    <h1>Yzerfontein Social Tennis Club</h1>
                </div>
            </div>
            <a href="af/index.html" class="language-toggle">Afrikaans</a>
        </div>
    </header>

    <nav>
        <div class="container">
            <div class="nav-container">
                <button class="hamburger" id="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <ul class="nav-links" id="nav-links">
                    <li><a href="#about">About</a></li>
                    <li><a href="#social-tennis">Social Tennis</a></li>
                    <li><a href="#court-info">Court Info</a></li>
                    <li><a href="#bookings">Bookings</a></li>
                    <li><a href="#membership">Membership</a></li>
                    <li><a href="blog/" onclick="trackBlogClick()">Blog</a></li>
                    <li><a href="#events">Events</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="hero">
        <div class="container">
            <h2>Welcome to Tennis in Yzerfontein</h2>
            <p>Join our friendly community for social tennis, casual play, and the joy of the game in our beautiful coastal setting.</p>
        </div>
    </div>

    <main class="container">
        <section id="about" class="section">
            <h2>About Our Club</h2>
            <p>Yzerfontein Social Tennis Club exists to provide a welcoming, well-maintained space for people in our community to enjoy tennis in a relaxed, social setting. We aim to keep tennis accessible, enjoyable, and sustainable for both residents and visitors, while reflecting the close-knit, friendly, and active spirit of Yzerfontein itself.</p>
            
            <p>Our goal is simple: to keep tennis thriving in Yzerfontein for the long term.</p>

            <div class="info-grid">
                <div class="info-card">
                    <h4>Community Focus</h4>
                    <p>From just 10 members in 2022 to over 66 in 2025, we've grown steadily while staying focused on social play, continuity, and a strong sense of community over competition.</p>
                </div>
                <div class="info-card">
                    <h4>Upgraded Facilities</h4>
                    <p>In 2025, we reopened our resurfaced courts, thanks to strong collaboration between the club, the municipality, and local partners. A proud moment of community working together.</p>
                </div>
                <div class="info-card">
                    <h4>Accessible Tennis</h4>
                    <p>We support regular, inclusive social tennis, encourage casual and private play, and welcome holiday visitors while respecting local members.</p>
                </div>
            </div>
        </section>

        <section id="social-tennis" class="section">
            <h2>Saturday Social Tennis</h2>
            <p>Informal, friendly tennis - all welcome. No booking needed. Just bring your racquet and join in.</p>
            
            <div class="info-grid">
                <div class="info-card">
                    <h4>When</h4>
                    <p>Saturdays, 09:30-11:30 (weather permitting)</p>
                </div>
                <div class="info-card">
                    <h4>Members</h4>
                    <p>R30 per session (ball fee)</p>
                </div>
                <div class="info-card">
                    <h4>Guests</h4>
                    <p>R60 per session (includes R30 guest fee + R30 ball fee)</p>
                </div>
            </div>

            <div class="whatsapp-updates">
                <h4>Stay Updated</h4>
                <p>Join our WhatsApp group for social tennis updates and cancellations</p>
                <a href="https://chat.whatsapp.com/IhcewY4VZBHIixEa4oq9LA" target="_blank" class="whatsapp-link">
                    <i class="fab fa-whatsapp"></i>
                    <span>Join Our Social Tennis Group</span>
                </a>
            </div>
        </section>

        <section id="court-info" class="section">
            <h2>Court Information</h2>
            
            <h3>Opening Hours</h3>
            <p>Courts are open daily, weather permitting:</p>
            
            <table>
                <thead>
                    <tr>
                        <th>Season</th>
                        <th>Hours</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Winter (May - October)</td>
                        <td>08:00 - 19:00</td>
                    </tr>
                    <tr>
                        <td>Summer (November - April)</td>
                        <td>07:00 - 20:00</td>
                    </tr>
                </tbody>
            </table>

            <h3>Court Rules</h3>
            <div class="rules-grid">
                <div class="rules-card">
                    <h4>While You're on Court</h4>
                    <p>Help keep the courts in good condition for everyone:</p>
                    <ul>
                        <li>Wear non-marking tennis shoes only</li>
                        <li>Use the soft broom provided to sweep away leaves, sand, or moisture before play</li>
                        <li>Lock the gate after your session</li>
                    </ul>
                </div>

                <div class="rules-card">
                    <h4>What Not to Do on Court</h4>
                    <p>These actions damage the courts and affect everyone's use:</p>
                    <ul>
                        <li>Do not play if the surface is wet or damp (including early morning dew)</li>
                        <li>Do not use the fence to warm up - please use the hitting wall</li>
                        <li>Do not bring bikes, skateboards or scooters onto the court</li>
                        <li>Do not wear shoes with studs, spikes, or hard soles - only tennis shoes allowed</li>
                        <li>Do not drag chairs, coolers, or heavy items across the court</li>
                        <li>Do not drive or park any vehicles on the courts</li>
                    </ul>
                </div>
            </div>

            <h3>Court Access</h3>
            <p style="margin-bottom: 30px;">Court keys are stored in a lockbox for member access. The combination is shared with members through the Member Zone WhatsApp group. Please ensure you lock the gate after your session.</p>

            <div class="info-card">
                <h4>Important Note</h4>
                <p>Parents and guardians are responsible for ensuring their children follow these rules. No children under 12 unsupervised.</p>
            </div>
        </section>

        <section id="bookings" class="section">
            <h2>Court Bookings (Outside Social Tennis)</h2>
            
            <h3>Member Court Use </h3>
            <ul>
                <li>Members: Free of charge</li>
                <li>Guests playing with a member: R30 per guest per session</li>
            </ul>

            <h3>Court Bookings (Non-Members)</h3>
            <table>
                <thead>
                    <tr>
                        <th>Players</th>
                        <th>Duration</th>
                        <th>Fee</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2 Players</td>
                        <td>2 hours</td>
                        <td>R100</td>
                    </tr>
                    <tr>
                        <td>4 Players</td>
                        <td>2 hours</td>
                        <td>R200</td>
                    </tr>
                </tbody>
            </table>

            <div class="info-card">
                <h4>Booking Information</h4>
                <p>Refundable key deposit: R200</p>
                <p>Bookings depend on availability, with preference given to members. To book and pay, visit the Yzerfontein Sports & Recreational Centre (Cnr Buitekant & Beach Rd) or call 022 451 2819.</p>
                <p><strong>Visitor access:</strong> Through the Court 2 gate (left-hand side) - key available from the Yzerfontein Sports & Recreational Centre.</p>
            </div>
        </section>

        <section id="membership" class="section">
            <h2>Join Our Club</h2>
            <p>Joining the club gives you full access to the courts, discounted social tennis, and a chance to take part in regular socials and community events. Since we're part of the Yzerfontein Sports and Recreation Club (YSRC), at least one adult member of your household needs to be a YSRC member — with added perks across the wider club.</p>

            <h3>Membership Categories & Annual Fees (2025/2026 Season)</h3>
            <p>Not sure what to pay? Use our membership wizard to calculate your fees and see exactly which forms you need to fill in.</p>
            <button class="wizard-button" onclick="openMembershipWizard()">
                <i class="fas fa-calculator"></i> Membership Fee Calculator
            </button>
            <table>
                <thead>
                    <tr>
                        <th>Category</th>
                        <th>Fee</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Couple</td>
                        <td>R350</td>
                        <td>For couples (only one partner needs YSRC membership)</td>
                    </tr>
                    <tr>
                        <td>Single</td>
                        <td>R250</td>
                        <td>Individual adult membership</td>
                    </tr>
                    <tr>
                        <td>Pensioner (60+)</td>
                        <td>R200</td>
                        <td>For members aged 60 and over</td>
                    </tr>
                    <tr>
                        <td>Junior (under 18)</td>
                        <td>R150</td>
                        <td>For players under 18 years of age (no YSRC membership required)</td>
                    </tr>
                    <tr>
                        <td>Social Member</td>
                        <td>R120</td>
                        <td>Community involvement without court access</td>
                    </tr>
                </tbody>
            </table>

            <h3>How to Join</h3>
            <div class="info-grid">
                <div class="info-card">
                    <h4>Step 1: Sports Club Membership (Adults Only)</h4>
                    <p><strong>For Adults:</strong> Skip if you're already a member of the Yzerfontein Sport and Recreation Club.</p>
                    <p>Otherwise, complete the Yzerfontein Sport and Recreation Club application form first.</p>
                    <p><em>Tennis Club members get a R50 discount per person - see form for details.</em></p>
                    <p><strong>For Couples:</strong> Only one partner needs to be a YSRC member. Choose who will join based on your preferences (e.g., if one partner is a pensioner, they might be cheaper to join).</p>
                    <p><strong>For Juniors:</strong> No YSRC membership required - they only join the tennis club.</p>
                    <a href="https://docs.google.com/document/d/1vnLIhdmD81VhKJrJtrxHX1ECj14rYvvY/edit?usp=sharing&ouid=114896354047198025305&rtpof=true&sd=true" target="_blank" style="display: inline-block; background: #3498db; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin-top: 10px;">Download Sports Club Form</a>
                </div>
                <div class="info-card">
                    <h4>Step 2: Tennis Club Membership</h4>
                    <p>Complete the Yzerfontein Social Tennis Club membership application form and submit with payment to <strong>info@yzerfonteintennis.co.za</strong></p>
                    <p><strong>Choose your option:</strong></p>
                    <ul style="margin: 15px 0;">
                        <li><strong>Fill online:</strong> Fill out the form in your browser, then <strong style="color: #e74c3c;">MUST PRINT IT</strong> and sign the printed copy</li>
                        <li><strong>Download PDF:</strong> Get a blank PDF form to fill in and sign</li>
                    </ul>
                    <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 6px; padding: 12px; margin-top: 15px;">
                        <strong style="color: #856404;">⚠️ Important:</strong> The online form does not save your information. Once you close the browser or refresh the page, all your data will be lost. You must print the completed form immediately after filling it out, then sign the printed copy before sending.
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap;">
                        <a href="forms/membership_form.html" target="_blank" style="display: inline-block; background: #3498db; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; font-weight: 500; transition: background-color 0.3s ease;">Fill Online</a>
                        <a href="https://drive.google.com/uc?export=download&id=1xwT6E7IQ6Vpjs_Gla8AdfF9sSZVr-xmn" target="_blank" style="display: inline-block; background: #27ae60; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; font-weight: 500; transition: background-color 0.3s ease;">Download PDF</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="events" class="section">
            <h2>Upcoming Events</h2>
            <div class="events-iframe-container">
                <iframe src='https://widgets.sociablekit.com/facebook-page-events/iframe/25572874' frameborder='0' width='100%' height='600' scrolling='no' onload="trackEventsLoaded()"></iframe>
            </div>
        </section>

        <section id="contact" class="section">
            <h2>Contact & Location</h2>
            
            <div class="contact-grid">
                <div class="contact-item">
                    <h4>General Contact</h4>
                    <p><strong>Committee Members:</strong><br>
                    Chairperson: Stefan Bauer<br>
                    Treasurer: Faan Oosthuizen<br>
                    Secretary: Sarah Steele</p>
                    <p><strong>Email:</strong><br>
                    info@yzerfonteintennis.co.za</p>
                    <a href="https://chat.whatsapp.com/HFFSpwKN46rEoDKErfcium" target="_blank" class="contact-whatsapp-link">
                        <i class="fab fa-whatsapp"></i>
                        Join Our Community
                    </a>
                </div>
                
                <div class="contact-item">
                    <h4>Bookings & Payments</h4>
                    <p><strong>Yzerfontein Sports & Recreational Centre</strong><br>
                    Cnr Buitekant & Beach Rd<br>
                    Phone: 022 451 2819</p>
                </div>
                
                <div class="contact-item">
                    <h4>Court Location</h4>
                    <p>Find our tennis courts in Yzerfontein</p>
                    <a href="https://maps.app.goo.gl/8SecUnkYP5r756kE9" target="_blank">View on Google Maps</a>
                </div>
            </div>

            <div class="social-media">
                <h4>Follow Us</h4>
                <div class="social-links">
                    <a href="https://www.facebook.com/yzerfonteinsocialtennisclub/" target="_blank" class="social-link">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                        </svg>
                        <span>YTSC (Tennis)</span>
                    </a>
                    <a href="https://www.facebook.com/yzerfonteinsportsklub.yzerfontein" target="_blank" class="social-link">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                        </svg>
                        <span>YSRC (Main Sportsclub)</span>
                    </a>
                    <a href="https://yzersportclub.co.za/" target="_blank" class="social-link">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                        </svg>
                        <span>YSRC Website</span>
                    </a>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <img src="img/ytc_logo.png" alt="Yzerfontein Tennis Club Logo" class="footer-logo">
                <div class="footer-text">
                    <p>&copy; 2025 Yzerfontein Social Tennis Club. All rights reserved.</p>
                    <p>Keeping tennis thriving in Yzerfontein for the long term.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Survey Banner -->
    <div class="survey-banner" id="surveyBanner">
        <div class="survey-banner-content">
            <div class="survey-banner-text">
                <i class="fas fa-clipboard-list"></i>
                Help us shape the future of our tennis club
            </div>
            <a href="https://tinyurl.com/ystcsurvey" target="_blank" class="survey-banner-link" onclick="trackSurveyClick()">
                Take Survey
            </a>
            <button class="survey-banner-close" onclick="closeSurveyBanner()">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Membership Wizard Modal -->
    <div class="wizard-overlay" id="wizardOverlay">
        <div class="wizard-modal">
            <div class="wizard-header">
                <button class="wizard-close" onclick="closeMembershipWizard()">&times;</button>
                <h3>Membership Fee Calculator</h3>
                <p>Let's calculate your fees step by step</p>
            </div>
            <div class="wizard-content">
                <div class="wizard-progress" id="wizardProgress">
                    <div class="wizard-progress-step active"></div>
                    <div class="wizard-progress-step"></div>
                    <div class="wizard-progress-step"></div>
                    <div class="wizard-progress-step"></div>
                    <div class="wizard-progress-step"></div>
                    <div class="wizard-progress-step"></div>
                    <div class="wizard-progress-step"></div>
                </div>

                <!-- Step 1: Individual or Couple -->
                <div class="wizard-step active" id="step1">
                    <div class="wizard-question">
                        <h4>Are you joining on your own, or with your partner?</h4>
                        <div class="wizard-options">
                            <div class="wizard-option" onclick="selectOption(this, 'individual')">
                                <input type="radio" name="membershipType" value="individual" id="individual">
                                <label for="individual">Just me</label>
                            </div>
                            <div class="wizard-option" onclick="selectOption(this, 'couple')">
                                <input type="radio" name="membershipType" value="couple" id="couple">
                                <label for="couple">Me and my partner</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Your Age -->
                <div class="wizard-step" id="step2">
                    <div class="wizard-question">
                        <h4>Are you 60 or older?</h4>
                        <div class="wizard-options">
                            <div class="wizard-option" onclick="selectOption(this, 'under60')">
                                <input type="radio" name="yourAge" value="under60" id="yourUnder60">
                                <label for="yourUnder60">No, I'm under 60</label>
                            </div>
                            <div class="wizard-option" onclick="selectOption(this, 'over60')">
                                <input type="radio" name="yourAge" value="over60" id="yourOver60">
                                <label for="yourOver60">Yes, I'm 60 or older</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Partner Age (if couple) -->
                <div class="wizard-step" id="step3">
                    <div class="wizard-question">
                        <h4>Is your partner 60 or older?</h4>
                        <div class="wizard-options">
                            <div class="wizard-option" onclick="selectOption(this, 'partnerUnder60')">
                                <input type="radio" name="partnerAge" value="under60" id="partnerUnder60">
                                <label for="partnerUnder60">No, my partner is under 60</label>
                            </div>
                            <div class="wizard-option" onclick="selectOption(this, 'partnerOver60')">
                                <input type="radio" name="partnerAge" value="over60" id="partnerOver60">
                                <label for="partnerOver60">Yes, my partner is 60 or older</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3.5: YSRC Membership for Couples -->
                <div class="wizard-step" id="step3_5">
                    <div class="wizard-question">
                        <h4>YSRC Sports Club Membership</h4>
                        <p style="font-size: 0.9rem; color: #666; margin-bottom: 15px;">At least one partner needs to be a YSRC member. Are either of you already YSRC members?</p>
                        <div class="wizard-options">
                            <div class="wizard-option" onclick="selectOption(this, 'yes')">
                                <input type="radio" name="ysrcPartner" value="yes" id="ysrcYes">
                                <label for="ysrcYes">Yes, at least one of us is already a YSRC member</label>
                            </div>
                            <div class="wizard-option" onclick="selectOption(this, 'no')">
                                <input type="radio" name="ysrcPartner" value="no" id="ysrcNo">
                                <label for="ysrcNo">No, neither of us is a YSRC member yet</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Children -->
                <div class="wizard-step" id="step4">
                    <div class="wizard-question">
                        <h4>Are you adding children under 18?</h4>
                        <div class="wizard-options">
                            <div class="wizard-option" onclick="selectOption(this, 'noChildren')">
                                <input type="radio" name="children" value="0" id="noChildren">
                                <label for="noChildren">No children</label>
                            </div>
                            <div class="wizard-option" onclick="selectOption(this, '1')">
                                <input type="radio" name="children" value="1" id="oneChild">
                                <label for="oneChild">1 child</label>
                            </div>
                            <div class="wizard-option" onclick="selectOption(this, '2')">
                                <input type="radio" name="children" value="2" id="twoChildren">
                                <label for="twoChildren">2 children</label>
                            </div>
                            <div class="wizard-option" onclick="selectOption(this, '3')">
                                <input type="radio" name="children" value="3" id="threeChildren">
                                <label for="threeChildren">3 children</label>
                            </div>
                            <div class="wizard-option" onclick="selectOption(this, '4')">
                                <input type="radio" name="children" value="4" id="fourPlusChildren">
                                <label for="fourPlusChildren">4 or more children</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 5: YSRC Membership -->
                <div class="wizard-step" id="step5">
                    <div class="wizard-question">
                        <h4>YSRC Sports Club Membership</h4>
                        <p style="font-size: 0.9rem; color: #666; margin-bottom: 15px;">For each person, are they already a member of the YSRC Sports Club? If yes, have they paid this year's fee?</p>
                        <div id="ysrcMembershipOptions"></div>
                    </div>
                </div>

                <!-- Step 6: Bowls Membership -->
                <div class="wizard-step" id="step6">
                    <div class="wizard-question">
                        <div id="bowlsMembershipOptions"></div>
                    </div>
                </div>

                <!-- Results Step -->
                <div class="wizard-step" id="results">
                                    <div class="wizard-results">
                    <h4>💰 Your Fee Summary</h4>
                    <div id="feeTable"></div>
                    <div id="membershipSummary"></div>
                    
                    <div class="wizard-forms">
                        <h5>📝 Forms to Fill In</h5>
                        <div id="formsList"></div>
                    </div>
                </div>
                </div>

                <div id="wizardValidation" style="display: none; margin-top: 15px; padding: 12px; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 6px; color: #721c24;">
                    <i class="fas fa-exclamation-triangle" style="margin-right: 8px;"></i>
                    <span id="validationMessage"></span>
                </div>
                <div class="wizard-navigation">
                    <button class="wizard-btn wizard-btn-secondary" id="prevBtn" onclick="previousStep()" style="display: none;">Previous</button>
                    <div style="flex: 1;"></div>
                    <button class="wizard-btn wizard-btn-primary" id="nextBtn" onclick="nextStep()">Next</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== NAVIGATION & UI FUNCTIONALITY =====
        
        // Hamburger menu functionality
        const hamburger = document.getElementById('hamburger');
        const navLinks = document.getElementById('nav-links');

        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            navLinks.classList.toggle('active');
        });

        // Close menu when clicking on a link
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                hamburger.classList.remove('active');
                navLinks.classList.remove('active');
            });
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Navigation scroll tracking
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('.section');
            const navLinks = document.querySelectorAll('.nav-links a');
            
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (scrollY >= (sectionTop - 200)) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });

            // Track events section view
            const eventsSection = document.getElementById('events');
            if (eventsSection) {
                const eventsTop = eventsSection.offsetTop;
                const eventsHeight = eventsSection.clientHeight;
                if (scrollY >= (eventsTop - 200) && scrollY <= (eventsTop + eventsHeight)) {
                    if (!sessionStorage.getItem('eventsViewed')) {
                        gtag('event', 'events_section_viewed', {
                            'event_category': 'engagement',
                            'event_label': 'events_section'
                        });
                        sessionStorage.setItem('eventsViewed', 'true');
                    }
                }
            }
        });

        // ===== MEMBERSHIP WIZARD =====
        
        // Wizard state
        let currentStep = 1;
        let wizardData = {
            membershipType: '',
            yourAge: '',
            partnerAge: '',
            ysrcPartner: '', // Who is the YSRC member for couples
            selectedYSRCMember: '', // Store which partner is the YSRC member
            children: 0,
            ysrcMembers: [],
            ysrcPaid: [],
            bowlsMembers: []
        };

        // Wizard modal controls
        function openMembershipWizard() {
            document.getElementById('wizardOverlay').style.display = 'flex';
            resetWizard();
        }

        function closeMembershipWizard() {
            document.getElementById('wizardOverlay').style.display = 'none';
        }

        function resetWizard() {
            currentStep = 1;
            wizardData = {
                membershipType: '',
                yourAge: '',
                partnerAge: '',
                ysrcPartner: '',
                selectedYSRCMember: '',
                children: 0,
                ysrcMembers: [],
                ysrcPaid: [],
                bowlsMembers: []
            };
            
            // Reset all inputs
            document.querySelectorAll('input[type="radio"]').forEach(radio => radio.checked = false);
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => checkbox.checked = false);
            document.querySelectorAll('.wizard-option').forEach(option => option.classList.remove('selected'));
            
            // Show first step
            showStep(1);
            updateProgress();
        }

        function selectOption(element, value) {
            // Hide any validation message when user makes a selection
            hideValidation();
            
            // Handle different step types
            const step = currentStep;
            
            if (step === 1) {
                // Handle membership type selection (original wizard-option style)
                const options = element.parentElement.querySelectorAll('.wizard-option');
                options.forEach(option => option.classList.remove('selected'));
                element.classList.add('selected');
                wizardData.membershipType = value;
            } else if (step === 2) {
                // Handle age selection (original wizard-option style)
                const options = element.parentElement.querySelectorAll('.wizard-option');
                options.forEach(option => option.classList.remove('selected'));
                element.classList.add('selected');
                wizardData.yourAge = value;
            } else if (step === 3) {
                // Handle partner age selection (original wizard-option style)
                const options = element.parentElement.querySelectorAll('.wizard-option');
                options.forEach(option => option.classList.remove('selected'));
                element.classList.add('selected');
                wizardData.partnerAge = value;
            } else if (step === 3.5) {
                // Handle YSRC member selection (original wizard-option style)
                const options = element.parentElement.querySelectorAll('.wizard-option');
                options.forEach(option => option.classList.remove('selected'));
                element.classList.add('selected');
                wizardData.ysrcPartner = value;
            } else if (step === 4) {
                // Handle children selection (original wizard-option style)
                const options = element.parentElement.querySelectorAll('.wizard-option');
                options.forEach(option => option.classList.remove('selected'));
                element.classList.add('selected');
                wizardData.children = parseInt(value);
            } else if (step === 5) {
                // Handle YSRC membership selection (new inline style)
                const radioName = element.getAttribute('name');
                const isYes = value === 'yes';
                
                // Extract person and question from radio name
                let person, question;
                if (radioName.includes('Member')) {
                    person = radioName.replace('Member', '');
                    question = 'member';
                } else if (radioName.includes('Paid')) {
                    person = radioName.replace('Paid', '');
                    question = 'paid';
                }
                
                if (question === 'member') {
                    if (isYes) {
                        if (!wizardData.ysrcMembers.includes(person)) {
                            wizardData.ysrcMembers.push(person);
                        }
                        // Show paid section for this person
                        const paidSection = document.getElementById(`${person}PaidSection`);
                        if (paidSection) {
                            paidSection.style.display = 'block';
                        }
                    } else {
                        wizardData.ysrcMembers = wizardData.ysrcMembers.filter(m => m !== person);
                        wizardData.ysrcPaid = wizardData.ysrcPaid.filter(m => m !== person);
                        // Hide paid section for this person
                        const paidSection = document.getElementById(`${person}PaidSection`);
                        if (paidSection) {
                            paidSection.style.display = 'none';
                        }
                    }
                } else if (question === 'paid') {
                    if (isYes) {
                        if (!wizardData.ysrcPaid.includes(person)) {
                            wizardData.ysrcPaid.push(person);
                        }
                    } else {
                        wizardData.ysrcPaid = wizardData.ysrcPaid.filter(m => m !== person);
                    }
                }
                
                // Special handling for couple's YSRC member selection
                if (wizardData.membershipType === 'couple' && radioName === 'ysrcMember') {
                    // Store the selected YSRC member
                    wizardData.selectedYSRCMember = value;
                    // Add the selected person to YSRC members
                    if (!wizardData.ysrcMembers.includes(value)) {
                        wizardData.ysrcMembers.push(value);
                    }
                    // Show the paid section for couples
                    const paidSection = document.getElementById('ysrcPaidSection');
                    if (paidSection) {
                        paidSection.style.display = 'block';
                    }
                }
                

                
                // Special handling for couple's YSRC paid selection
                if (wizardData.membershipType === 'couple' && radioName === 'ysrcPaid') {
                    const selectedMember = document.querySelector('input[name="ysrcMember"]:checked');
                    if (selectedMember) {
                        const memberPerson = selectedMember.value;
                        if (isYes) {
                            if (!wizardData.ysrcPaid.includes(memberPerson)) {
                                wizardData.ysrcPaid.push(memberPerson);
                            }
                        } else {
                            wizardData.ysrcPaid = wizardData.ysrcPaid.filter(m => m !== memberPerson);
                        }
                    }
                }
            }
        }

        function toggleBowlsMembership(personId) {
            const checkbox = document.getElementById(`bowls_${personId}`);
            const label = checkbox.parentElement;
            
            if (checkbox.checked) {
                if (!wizardData.bowlsMembers.includes(personId)) {
                    wizardData.bowlsMembers.push(personId);
                }
                // Update label styling to show selected state
                label.style.background = getPersonColor(personId);
                label.style.color = 'white';
            } else {
                wizardData.bowlsMembers = wizardData.bowlsMembers.filter(m => m !== personId);
                // Update label styling to show unselected state
                label.style.background = '#f8f9fa';
                label.style.color = '#2c3e50';
            }
        }

        function getPersonColor(personId) {
            if (personId === 'you') return '#0494b6';
            if (personId === 'partner') return '#6f42c1';
            const childColors = ['#27ae60', '#f39c12', '#9b59b6', '#e67e22'];
            const childNum = parseInt(personId.replace('child', ''));
            return childColors[(childNum - 1) % childColors.length];
        }

        function generateYSRCMembershipOptions() {
            const container = document.getElementById('ysrcMembershipOptions');
            let html = '';
            
            if (wizardData.membershipType === 'individual') {
                // Individual membership - simple yes/no for YSRC membership
                html = `
                    <div style="margin-bottom: 25px; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #0494b6;">
                        <h5 style="color: #2c3e50; margin-bottom: 15px; font-size: 1.1rem;">👤 You</h5>
                        
                        <div style="margin-bottom: 12px;">
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; background: white; border-radius: 6px; border: 2px solid #e9ecef;">
                                <span style="color: #2c3e50; font-weight: 500;">Are you already a YSRC member?</span>
                                <div style="display: flex; gap: 15px;">
                                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 6px 12px; border-radius: 4px; transition: all 0.2s ease;" onclick="selectOption(this.querySelector('input'), 'yes')">
                                        <input type="radio" name="youMember" value="yes" id="youMemberYes" style="margin: 0;">
                                        <span>Yes</span>
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 6px 12px; border-radius: 4px; transition: all 0.2s ease;" onclick="selectOption(this.querySelector('input'), 'no')">
                                        <input type="radio" name="youMember" value="no" id="youMemberNo" style="margin: 0;">
                                        <span>No</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <div id="youPaidSection" style="display: none; margin-top: 12px;">
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; background: white; border-radius: 6px; border: 2px solid #e9ecef;">
                                <span style="color: #2c3e50; font-weight: 500;">Have you paid the 2025/2026 season fee?</span>
                                <div style="display: flex; gap: 15px;">
                                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 6px 12px; border-radius: 4px; transition: all 0.2s ease;" onclick="selectOption(this.querySelector('input'), 'yes')">
                                        <input type="radio" name="youPaid" value="yes" id="youPaidYes" style="margin: 0;">
                                        <span>Yes</span>
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 6px 12px; border-radius: 4px; transition: all 0.2s ease;" onclick="selectOption(this.querySelector('input'), 'no')">
                                        <input type="radio" name="youPaid" value="no" id="youPaidNo" style="margin: 0;">
                                        <span>No</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (wizardData.membershipType === 'couple') {
                if (wizardData.ysrcPartner === 'yes') {
                    // At least one is a member - ask which one and if they've paid
                    html = `
                        <div style="margin-bottom: 25px; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #0494b6;">
                            <h5 style="color: #2c3e50; margin-bottom: 15px; font-size: 1.1rem;">👥 Couple YSRC Membership</h5>
                            
                            <div style="margin-bottom: 12px;">
                                <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; background: white; border-radius: 6px; border: 2px solid #e9ecef;">
                                    <span style="color: #2c3e50; font-weight: 500;">Which partner is the YSRC member?</span>
                                    <div style="display: flex; gap: 15px;">
                                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 6px 12px; border-radius: 4px; transition: all 0.2s ease;" onclick="selectOption(this.querySelector('input'), 'you')">
                                            <input type="radio" name="ysrcMember" value="you" id="ysrcMemberYou" style="margin: 0;">
                                            <span>You</span>
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 6px 12px; border-radius: 4px; transition: all 0.2s ease;" onclick="selectOption(this.querySelector('input'), 'partner')">
                                            <input type="radio" name="ysrcMember" value="partner" id="ysrcMemberPartner" style="margin: 0;">
                                            <span>Partner</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="ysrcPaidSection" style="display: none; margin-top: 12px;">
                                <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; background: white; border-radius: 6px; border: 2px solid #e9ecef;">
                                    <span style="color: #2c3e50; font-weight: 500;">Has the YSRC member paid the 2025/2026 season fee?</span>
                                    <div style="display: flex; gap: 15px;">
                                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 6px 12px; border-radius: 4px; transition: all 0.2s ease;" onclick="selectOption(this.querySelector('input'), 'yes')">
                                            <input type="radio" name="ysrcPaid" value="yes" id="ysrcPaidYes" style="margin: 0;">
                                            <span>Yes</span>
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 6px 12px; border-radius: 4px; transition: all 0.2s ease;" onclick="selectOption(this.querySelector('input'), 'no')">
                                            <input type="radio" name="ysrcPaid" value="no" id="ysrcPaidNo" style="margin: 0;">
                                            <span>No</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    // Neither is a member - skip this step entirely
                    html = `
                        <div style="margin-bottom: 25px; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #27ae60;">
                            <h5 style="color: #2c3e50; margin-bottom: 15px; font-size: 1.1rem;">💡 Automatic YSRC Selection</h5>
                            <p style="color: #666; margin-bottom: 15px;">Since neither partner is a YSRC member, we'll automatically select the cheaper option to join YSRC.</p>
                        </div>
                    `;
                }
            }
            
            // Add note about children not needing YSRC membership
            if (wizardData.children > 0) {
                html += `
                    <div style="margin-top: 20px; padding: 15px; background: #e3f2fd; border-radius: 6px; border-left: 4px solid #2196f3;">
                        <p style="margin: 0; color: #1565c0; font-size: 0.9rem;">
                            <strong>💡 Note:</strong> Children under 18 do not need YSRC membership - they only join the tennis club.
                        </p>
                    </div>
                `;
            }
            
            container.innerHTML = html;
        }

        function generateBowlsMembershipOptions() {
            const container = document.getElementById('bowlsMembershipOptions');
            let html = '';
            
            // Determine who is the YSRC member that can get bowls membership
            let ysrcMember = null;
            
            if (wizardData.membershipType === 'individual') {
                // Individual membership - only check if you are a YSRC member
                if (wizardData.ysrcMembers.includes('you')) {
                    ysrcMember = { id: 'you', name: 'You', icon: '👤', color: '#0494b6' };
                }
            } else if (wizardData.membershipType === 'couple') {
                // Couple membership - check which partner is the YSRC member
                if (wizardData.ysrcPartner === 'yes') {
                    // Use the stored selected YSRC member
                    if (wizardData.selectedYSRCMember === 'you') {
                        ysrcMember = { id: 'you', name: 'You', icon: '👤', color: '#0494b6' };
                    } else if (wizardData.selectedYSRCMember === 'partner') {
                        ysrcMember = { id: 'partner', name: 'Partner', icon: '👥', color: '#6f42c1' };
                    }
                }
                // If neither is a member, no bowls membership available (automatic selection)
            }
            
            if (!ysrcMember) {
                html = `
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 8px; text-align: center;">
                        <p style="color: #666; margin: 0;">No YSRC member found. Bowls membership is only available to YSRC members.</p>
                    </div>
                `;
            } else {
                const isChecked = wizardData.bowlsMembers.includes(ysrcMember.id);
                const memberText = ysrcMember.name === 'You' ? "Yes, I'm a bowls member" : "Yes, my partner is a bowls member";
                html = `
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #ff9800;">
                        <h5 style="color: #2c3e50; margin-bottom: 15px; font-size: 1.1rem;">🏏 Bowls Club Membership</h5>
                        <p style="color: #666; margin-bottom: 20px; font-size: 0.9rem;">Are you also a member of the Bowls Club? This gives you a R100 discount on YSRC fees.</p>
                        
                        <div style="display: flex; align-items: center; padding: 15px; background: white; border-radius: 8px; border: 2px solid ${ysrcMember.color}; transition: all 0.2s ease;">
                            <div style="display: flex; align-items: center; gap: 12px; flex: 1;">
                                <span style="font-size: 1.2rem;">${ysrcMember.icon}</span>
                                <span style="color: #2c3e50; font-weight: 500;">${ysrcMember.name}</span>
                            </div>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px 12px; border-radius: 6px; background: ${isChecked ? ysrcMember.color : '#f8f9fa'}; color: ${isChecked ? 'white' : '#2c3e50'}; font-weight: 500; transition: all 0.2s ease;" onclick="toggleBowlsMembership('${ysrcMember.id}')">
                                <input type="checkbox" id="bowls_${ysrcMember.id}" ${isChecked ? 'checked' : ''} style="margin: 0; transform: scale(1.1);" onchange="toggleBowlsMembership('${ysrcMember.id}')">
                                <span>${memberText}</span>
                            </label>
                        </div>
                        
                        <div style="margin-top: 20px; padding: 15px; background: #e3f2fd; border-radius: 6px; border-left: 4px solid #2196f3;">
                            <p style="margin: 0; color: #1565c0; font-size: 0.9rem;">
                                <strong>💡 Tip:</strong> Bowls membership gives you a R100 discount on your YSRC fees.
                            </p>
                        </div>
                    </div>
                `;
            }
            
            container.innerHTML = html;
        }



        // Wizard step navigation
        function nextStep() {
            if (currentStep === 6) {
                calculateResults();
                showStep('results');
            } else {
                if (!validateCurrentStep()) {
                    return;
                }
                
                // Hide validation message when moving to next step
                hideValidation();
                
                // Handle step navigation for different membership types
                if (currentStep === 2) {
                    if (wizardData.membershipType === 'individual') {
                        currentStep = 4; // Skip partner questions for individuals
                    } else {
                        currentStep = 3; // Go to partner age for couples
                    }
                } else if (currentStep === 3) {
                    currentStep = 3.5; // Go to YSRC partner choice for couples
                } else if (currentStep === 3.5) {
                    if (wizardData.ysrcPartner === 'no') {
                        // Skip YSRC selection step if neither is a member
                        currentStep = 4; // Go directly to children step
                    } else {
                        currentStep = 4; // Go to children step (then step 4 will decide whether to go to 5 or results)
                    }
                } else if (currentStep === 4) {
                    if (wizardData.membershipType === 'couple' && wizardData.ysrcPartner === 'no') {
                        calculateResults();
                        showStep('results'); // Skip all YSRC and bowls steps, go directly to results
                        updateProgress();
                        return;
                    } else {
                        currentStep = 5; // Go to YSRC membership step
                    }
                } else if (currentStep === 5) {
                    // Only go to step 6 if we're not skipping step 5
                    if (wizardData.membershipType === 'couple' && wizardData.ysrcPartner === 'no') {
                        calculateResults();
                        showStep('results');
                        updateProgress();
                        return;
                    } else {
                        // Check if there are any YSRC members who can get bowls membership
                        let hasYSRCMember = false;
                        if (wizardData.membershipType === 'individual') {
                            hasYSRCMember = wizardData.ysrcMembers.includes('you');
                        } else if (wizardData.membershipType === 'couple') {
                            // For couples, check if the selected YSRC member exists
                            const selectedMember = document.querySelector('input[name="ysrcMember"]:checked');
                            if (selectedMember) {
                                hasYSRCMember = wizardData.ysrcMembers.includes(selectedMember.value);
                            }
                        }
                        
                        if (hasYSRCMember) {
                            currentStep = 6; // Go to bowls membership step
                        } else {
                            calculateResults();
                            showStep('results');
                            updateProgress();
                            return;
                        }
                    }
                } else if (currentStep === 6) {
                    currentStep = 'results'; // Go to results
                } else {
                    currentStep++;
                }
                
                showStep(currentStep);
            }
            updateProgress();
        }

        function previousStep() {
            if (currentStep === 'results') {
                // From results, go back to the last step that was actually shown
                if (wizardData.membershipType === 'couple' && wizardData.ysrcPartner === 'no') {
                    // If neither partner is a YSRC member, we skipped steps 5 and 6
                    currentStep = 4; // Go back to children step
                } else {
                    // Check if we showed step 6 (bowls membership)
                    let hasYSRCMember = false;
                    if (wizardData.membershipType === 'individual') {
                        hasYSRCMember = wizardData.ysrcMembers.includes('you');
                    } else if (wizardData.membershipType === 'couple') {
                        const selectedMember = document.querySelector('input[name="ysrcMember"]:checked');
                        if (selectedMember) {
                            hasYSRCMember = wizardData.ysrcMembers.includes(selectedMember.value);
                        }
                    }
                    
                    if (hasYSRCMember) {
                        currentStep = 6; // Go back to bowls membership step
                    } else {
                        currentStep = 5; // Go back to YSRC membership step
                    }
                }
            } else if (currentStep === 6) {
                currentStep = 5; // Go back to YSRC membership step
            } else if (currentStep === 5) {
                currentStep = 4; // Go back to children step
            } else if (currentStep === 4) {
                if (wizardData.membershipType === 'couple') {
                    currentStep = 3.5; // Go back to YSRC partner choice
                } else {
                    currentStep = 2; // Go back to age for individuals
                }
            } else if (currentStep === 3.5) {
                currentStep = 3; // Go back to partner age
            } else if (currentStep === 3) {
                currentStep = 2; // Go back to your age
            } else {
                currentStep--;
            }
            
            showStep(currentStep);
            updateProgress();
        }

        function showStep(step) {
            // Hide all steps
            document.querySelectorAll('.wizard-step').forEach(stepEl => {
                stepEl.classList.remove('active');
            });



            // Show current step
            if (step === 'results') {
                document.getElementById('results').classList.add('active');
                document.getElementById('nextBtn').style.display = 'none';
                document.getElementById('prevBtn').style.display = 'inline-block';
            } else {
                // Handle step 3.5 and 3.6 specially since they have underscores in the IDs
                let stepId;
                if (step === 3.5) {
                    stepId = 'step3_5';
                } else if (step === 3.6) {
                    stepId = 'step3_6';
                } else {
                    stepId = `step${step}`;
                }
                document.getElementById(stepId).classList.add('active');
                document.getElementById('nextBtn').style.display = 'inline-block';
                document.getElementById('prevBtn').style.display = step > 1 ? 'inline-block' : 'none';
                
                // Generate options when showing specific steps
                if (step === 5) {
                    console.log('Showing step 5, calling generateYSRCMembershipOptions');
                    generateYSRCMembershipOptions();
                } else if (step === 6) {
                    console.log('Showing step 6, calling generateBowlsMembershipOptions');
                    generateBowlsMembershipOptions();
                }
            }
        }

        function showValidation(message) {
            const validationDiv = document.getElementById('wizardValidation');
            const messageSpan = document.getElementById('validationMessage');
            messageSpan.textContent = message;
            validationDiv.style.display = 'block';
            
            // Scroll to the validation message
            validationDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function hideValidation() {
            document.getElementById('wizardValidation').style.display = 'none';
        }

        function validateCurrentStep() {
            const step = currentStep;
            
            if (step === 1 && !wizardData.membershipType) {
                showValidation('Please select whether you are joining individually or as a couple.');
                return false;
            }
            if (step === 2 && !wizardData.yourAge) {
                showValidation('Please select your age category.');
                return false;
            }
            if (step === 3 && wizardData.membershipType === 'couple' && !wizardData.partnerAge) {
                showValidation('Please select your partner\'s age category.');
                return false;
            }
            if (step === 3.5 && wizardData.membershipType === 'couple' && !wizardData.ysrcPartner) {
                showValidation('Please select whether either of you is a YSRC member.');
                return false;
            }
            if (step === 4 && wizardData.children === undefined) {
                showValidation('Please select the number of children.');
                return false;
            }
            if (step === 5) {
                
                if (wizardData.membershipType === 'individual') {
                    // Check if individual answered YSRC membership question
                    const yesRadio = document.getElementById('youMemberYes');
                    const noRadio = document.getElementById('youMemberNo');
                    if (!yesRadio.checked && !noRadio.checked) {
                        showValidation('Please select whether you are already a YSRC member.');
                        return false;
                    }
                    
                    // If they are a member, check if they answered the paid question
                    if (wizardData.ysrcMembers.includes('you')) {
                        const paidYesRadio = document.getElementById('youPaidYes');
                        const paidNoRadio = document.getElementById('youPaidNo');
                        if (!paidYesRadio.checked && !paidNoRadio.checked) {
                            showValidation('Please select whether you have paid the 2025/2026 season fee.');
                            return false;
                        }
                    }
                } else if (wizardData.membershipType === 'couple') {
                    if (wizardData.ysrcPartner === 'yes') {
                        // Check if they selected which partner is the member
                        const youRadio = document.getElementById('ysrcMemberYou');
                        const partnerRadio = document.getElementById('ysrcMemberPartner');
                        if (!youRadio.checked && !partnerRadio.checked) {
                            showValidation('Please select which partner is the YSRC member.');
                            return false;
                        }
                        
                        // Only check the paid question if a partner has been selected
                        const selectedMember = document.querySelector('input[name="ysrcMember"]:checked');
                        if (selectedMember) {
                            // Check if they answered the paid question
                            const paidYesRadio = document.getElementById('ysrcPaidYes');
                            const paidNoRadio = document.getElementById('ysrcPaidNo');
                            if (!paidYesRadio.checked && !paidNoRadio.checked) {
                                showValidation('Please select whether the YSRC member has paid the 2025/2026 season fee.');
                                return false;
                            }
                        }
                    }
                    // If ysrcPartner === 'no', no validation needed (automatic selection)
                }
                return true;
            }
            if (step === 6) {
                // For bowls membership, we don't need to validate since checkboxes are optional
                // Users can choose to be bowls members or not - both are valid choices
                // But only show this step if there's actually a YSRC member
                if (wizardData.membershipType === 'couple' && wizardData.ysrcPartner === 'no') {
                    return false; // Skip this step entirely
                }
                return true;
            }
            
            return true;
        }

        function updateProgress() {
            const progressSteps = document.querySelectorAll('.wizard-progress-step');
            progressSteps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < currentStep) {
                    step.classList.add('completed');
                } else if (index + 1 === currentStep) {
                    step.classList.add('active');
                }
            });
        }

        // ===== WIZARD CALCULATIONS =====
        
        function calculateResults() {
            const results = calculateFees();
            displayResults(results);
        }

        function calculateFees() {
            const people = [];
            let totalTennisFee = 0;
            let totalYSRCFee = 0;
            let totalJoiningFee = 0;
            let totalDiscount = 0;

            // Calculate fees for main person
            const mainPerson = {
                name: 'You',
                tennisFee: wizardData.membershipType === 'couple' ? 350 : calculateTennisFee(wizardData.yourAge, 'single'),
                ysrcFee: calculateYSRCFee(wizardData.yourAge, 'you'),
                joiningFee: calculateJoiningFee('you'),
                discount: calculateDiscount(wizardData.bowlsMembers, 'you')
            };
            people.push(mainPerson);

            // Calculate fees for partner if couple
            if (wizardData.membershipType === 'couple') {
                const partnerPerson = {
                    name: 'Partner',
                    tennisFee: 0, // Partner gets free tennis as part of couple membership
                    ysrcFee: calculateYSRCFee(wizardData.partnerAge, 'partner'),
                    joiningFee: calculateJoiningFee('partner'),
                    discount: calculateDiscount(wizardData.bowlsMembers, 'partner')
                };
                people.push(partnerPerson);
            }

            // Calculate fees for children (no YSRC membership required)
            for (let i = 1; i <= wizardData.children; i++) {
                const childPerson = {
                    name: `Child ${i}`,
                    tennisFee: 150, // Junior fee
                    ysrcFee: 0, // No YSRC membership required for juniors
                    joiningFee: 0, // No YSRC joining fee for juniors
                    discount: 0 // No discount for juniors since they don't join YSRC
                };
                people.push(childPerson);
            }

            // Calculate totals
            people.forEach(person => {
                totalTennisFee += person.tennisFee;
                totalYSRCFee += person.ysrcFee;
                totalJoiningFee += person.joiningFee;
                totalDiscount += person.discount;
            });

            return {
                people: people,
                totalTennisFee: totalTennisFee,
                totalYSRCFee: totalYSRCFee,
                totalJoiningFee: totalJoiningFee,
                totalDiscount: totalDiscount,
                grandTotal: totalTennisFee + totalYSRCFee + totalJoiningFee - totalDiscount
            };
        }

        function calculateTennisFee(age, type) {
            if (age === 'over60') return 200;
            return 250; // Default adult fee
        }

        function calculateYSRCFee(age, person) {
            // For couples, only the YSRC member needs to pay fees
            if (wizardData.membershipType === 'couple') {
                if (wizardData.ysrcPartner === 'yes') {
                    // At least one is a member - check which one
                    const selectedMember = document.querySelector('input[name="ysrcMember"]:checked');
                    if (selectedMember) {
                        if (selectedMember.value === 'you' && person === 'partner') {
                            return 0; // Partner doesn't need YSRC
                        }
                        if (selectedMember.value === 'partner' && person === 'you') {
                            return 0; // You don't need YSRC
                        }
                    }
                } else {
                    // Neither is a member - automatically pick the cheaper one
                    const cheaperPartner = (wizardData.yourAge === 'over60' || wizardData.partnerAge === 'over60') ? 
                        (wizardData.yourAge === 'over60' ? 'you' : 'partner') : 'you';
                    
                    if (cheaperPartner === 'you' && person === 'partner') {
                        return 0; // Partner doesn't need YSRC
                    }
                    if (cheaperPartner === 'partner' && person === 'you') {
                        return 0; // You don't need YSRC
                    }
                }
            }
            
            // If not a member, they need to pay the annual fee
            if (!wizardData.ysrcMembers.includes(person)) {
                // Special case: for couples where neither is a member, only the cheaper partner pays
                if (wizardData.membershipType === 'couple' && wizardData.ysrcPartner === 'no') {
                    const cheaperPartner = (wizardData.yourAge === 'over60' || wizardData.partnerAge === 'over60') ? 
                        (wizardData.yourAge === 'over60' ? 'you' : 'partner') : 'you';
                    
                    if (person === cheaperPartner) {
                        if (age === 'over60') return 250;
                        return 350; // Default adult fee
                    } else {
                        return 0; // The other partner doesn't need YSRC
                    }
                } else {
                    if (age === 'over60') return 250;
                    return 350; // Default adult fee
                }
            }
            
            // If they are a member but haven't paid current season, they need to pay
            if (!wizardData.ysrcPaid.includes(person)) {
                if (age === 'over60') return 250;
                return 350; // Default adult fee
            }
            
            // If they are a member and have paid current season, no fee
            return 0;
        }

        function calculateJoiningFee(person) {
            // For couples, only the YSRC member needs to pay joining fee
            if (wizardData.membershipType === 'couple') {
                if (wizardData.ysrcPartner === 'yes') {
                    // At least one is a member - check which one
                    const selectedMember = document.querySelector('input[name="ysrcMember"]:checked');
                    if (selectedMember) {
                        if (selectedMember.value === 'you' && person === 'partner') {
                            return 0; // Partner doesn't need YSRC
                        }
                        if (selectedMember.value === 'partner' && person === 'you') {
                            return 0; // You don't need YSRC
                        }
                    }
                } else {
                    // Neither is a member - automatically pick the cheaper one
                    const cheaperPartner = (wizardData.yourAge === 'over60' || wizardData.partnerAge === 'over60') ? 
                        (wizardData.yourAge === 'over60' ? 'you' : 'partner') : 'you';
                    
                    if (cheaperPartner === 'you' && person === 'partner') {
                        return 0; // Partner doesn't need YSRC
                    }
                    if (cheaperPartner === 'partner' && person === 'you') {
                        return 0; // You don't need YSRC
                    }
                }
            }
            
            // Check if this person is already a YSRC member
            if (wizardData.ysrcMembers.includes(person)) {
                return 0; // Already a member
            }
            
            // Special case: for couples where neither is a member, only the cheaper partner pays joining fee
            if (wizardData.membershipType === 'couple' && wizardData.ysrcPartner === 'no') {
                const cheaperPartner = (wizardData.yourAge === 'over60' || wizardData.partnerAge === 'over60') ? 
                    (wizardData.yourAge === 'over60' ? 'you' : 'partner') : 'you';
                
                if (person === cheaperPartner) {
                    return 250; // Joining fee for the automatic selection
                } else {
                    return 0; // The other partner doesn't need YSRC
                }
            }
            
            return 250; // Joining fee for new members
        }

        function calculateDiscount(bowlsMembers, person) {
            // For couples, only the YSRC member can get discounts
            if (wizardData.membershipType === 'couple') {
                if (wizardData.ysrcPartner === 'yes') {
                    // At least one is a member - check which one
                    const selectedMember = document.querySelector('input[name="ysrcMember"]:checked');
                    if (selectedMember) {
                        if (selectedMember.value === 'you' && person === 'partner') {
                            return 0; // Partner doesn't get YSRC discounts
                        }
                        if (selectedMember.value === 'partner' && person === 'you') {
                            return 0; // You don't get YSRC discounts
                        }
                    }
                } else {
                    // Neither is a member - automatically pick the cheaper one
                    const cheaperPartner = (wizardData.yourAge === 'over60' || wizardData.partnerAge === 'over60') ? 
                        (wizardData.yourAge === 'over60' ? 'you' : 'partner') : 'you';
                    
                    if (cheaperPartner === 'you' && person === 'partner') {
                        return 0; // Partner doesn't get YSRC discounts
                    }
                    if (cheaperPartner === 'partner' && person === 'you') {
                        return 0; // You don't get YSRC discounts
                    }
                }
            }
            
            // Check if this person is a bowls member
            const isBowlsMember = bowlsMembers.includes(person);
            
            // Check if this person is paying YSRC fees (not a member or hasn't paid current season)
            let isPayingYSRC = !wizardData.ysrcMembers.includes(person) || 
                              (wizardData.ysrcMembers.includes(person) && !wizardData.ysrcPaid.includes(person));
            
            // Special case: for couples where neither is a member, only the cheaper partner pays YSRC fees
            if (wizardData.membershipType === 'couple' && wizardData.ysrcPartner === 'no') {
                const cheaperPartner = (wizardData.yourAge === 'over60' || wizardData.partnerAge === 'over60') ? 
                    (wizardData.yourAge === 'over60' ? 'you' : 'partner') : 'you';
                
                isPayingYSRC = (person === cheaperPartner);
            }
            
            // Only apply discount if they're actually paying YSRC fees
            if (!isPayingYSRC) {
                return 0; // No discount if they're not paying YSRC fees
            }
            
            if (isBowlsMember) {
                // Bowls membership gives R100 discount
                return 100;
            } else {
                // If not a bowls member, they get R50 discount for tennis club membership
                return 50;
            }
        }

        function displayResults(results) {
            // Create fee table
            let tableHTML = `
                <table class="wizard-table">
                    <thead>
                        <tr>
                            <th>Person</th>
                            <th>Tennis Fee</th>
                            <th>YSRC Fee</th>
                            <th>Joining Fee</th>
                            <th>Discount</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            results.people.forEach(person => {
                const personTotal = person.tennisFee + person.ysrcFee + person.joiningFee - person.discount;
                tableHTML += `
                    <tr>
                        <td>${person.name}</td>
                        <td>R${person.tennisFee}</td>
                        <td>R${person.ysrcFee}</td>
                        <td>R${person.joiningFee}</td>
                        <td>-R${person.discount}</td>
                        <td>R${personTotal}</td>
                    </tr>
                `;
            });

            tableHTML += `
                    <tr class="total-row">
                        <td><strong>TOTAL</strong></td>
                        <td><strong>R${results.totalTennisFee}</strong></td>
                        <td><strong>R${results.totalYSRCFee}</strong></td>
                        <td><strong>R${results.totalJoiningFee}</strong></td>
                        <td><strong>-R${results.totalDiscount}</strong></td>
                        <td><strong>R${results.grandTotal}</strong></td>
                    </tr>
                </tbody>
            </table>
            `;

            document.getElementById('feeTable').innerHTML = tableHTML;

            // Create membership summary
            let summaryHTML = '<div style="margin-top: 25px; background: #f8f9fa; border-radius: 8px; padding: 20px;"><h5 style="color: #2c3e50; margin-bottom: 15px;">📋 Your Membership Summary</h5>';
            
            // Membership type
            if (wizardData.membershipType === 'couple') {
                summaryHTML += '<div style="margin-bottom: 15px;"><strong>Membership Type:</strong> Couple (You + Partner)</div>';
            } else {
                summaryHTML += '<div style="margin-bottom: 15px;"><strong>Membership Type:</strong> Individual</div>';
            }
            
            // Family members
            summaryHTML += '<div style="margin-bottom: 15px;"><strong>Family Members:</strong><ul style="margin: 10px 0 0 20px;">';
            summaryHTML += '<li>You (Adult)</li>';
            if (wizardData.membershipType === 'couple') {
                summaryHTML += '<li>Partner (Adult)</li>';
            }
            for (let i = 1; i <= wizardData.children; i++) {
                summaryHTML += `<li>Child ${i} (Junior)</li>`;
            }
            summaryHTML += '</ul></div>';
            
            // YSRC membership status
            summaryHTML += '<div style="margin-bottom: 15px;"><strong>YSRC Membership Status:</strong><ul style="margin: 10px 0 0 20px;">';
            
            if (wizardData.membershipType === 'individual') {
                // Individual membership
                if (wizardData.ysrcMembers.includes('you')) {
                    summaryHTML += '<li>You: YSRC Member';
                    if (wizardData.ysrcPaid.includes('you')) {
                        summaryHTML += ' (Paid 2025/2026 fee)';
                    } else {
                        summaryHTML += ' (Needs to pay 2025/2026 fee)';
                    }
                    summaryHTML += '</li>';
                } else {
                    summaryHTML += '<li>You: Not a YSRC member (needs to join)</li>';
                }
            } else if (wizardData.membershipType === 'couple') {
                // Couple membership - show YSRC status
                if (wizardData.ysrcPartner === 'yes') {
                    // At least one is a member - check which one they selected
                    const selectedMember = document.querySelector('input[name="ysrcMember"]:checked');
                    if (selectedMember && selectedMember.value === 'you') {
                        if (wizardData.ysrcMembers.includes('you')) {
                            summaryHTML += '<li>You: YSRC Member';
                            if (wizardData.ysrcPaid.includes('you')) {
                                summaryHTML += ' (Paid 2025/2026 fee)';
                            } else {
                                summaryHTML += ' (Needs to pay 2025/2026 fee)';
                            }
                            summaryHTML += '</li>';
                        } else {
                            summaryHTML += '<li>You: Not a YSRC member (needs to join)</li>';
                        }
                        summaryHTML += '<li>Partner: No YSRC membership required</li>';
                    } else if (selectedMember && selectedMember.value === 'partner') {
                        summaryHTML += '<li>You: No YSRC membership required</li>';
                        if (wizardData.ysrcMembers.includes('partner')) {
                            summaryHTML += '<li>Partner: YSRC Member';
                            if (wizardData.ysrcPaid.includes('partner')) {
                                summaryHTML += ' (Paid 2025/2026 fee)';
                            } else {
                                summaryHTML += ' (Needs to pay 2025/2026 fee)';
                            }
                            summaryHTML += '</li>';
                        } else {
                            summaryHTML += '<li>Partner: Not a YSRC member (needs to join)</li>';
                        }
                    }
                } else {
                    // Neither is a member - automatically pick the cheaper one
                    const cheaperPartner = (wizardData.yourAge === 'over60' || wizardData.partnerAge === 'over60') ? 
                        (wizardData.yourAge === 'over60' ? 'you' : 'partner') : 'you';
                    
                    if (cheaperPartner === 'you') {
                        summaryHTML += '<li>You: Will join YSRC (automatic selection)</li>';
                        summaryHTML += '<li>Partner: No YSRC membership required</li>';
                    } else {
                        summaryHTML += '<li>You: No YSRC membership required</li>';
                        summaryHTML += '<li>Partner: Will join YSRC (automatic selection)</li>';
                    }
                }
            }
            
            // Children don't need YSRC membership
            for (let i = 1; i <= wizardData.children; i++) {
                summaryHTML += `<li>Child ${i}: No YSRC membership required (juniors only join tennis club)</li>`;
            }
            summaryHTML += '</ul></div>';
            
            // Bowls membership status (only for YSRC members)
            let bowlsMembers = [];
            
            if (wizardData.membershipType === 'individual') {
                // Individual membership - only check if you are a YSRC member
                if (wizardData.ysrcMembers.includes('you') && wizardData.bowlsMembers.includes('you')) {
                    bowlsMembers.push('You');
                }
            } else if (wizardData.membershipType === 'couple') {
                // Couple membership - check which partner is the YSRC member
                if (wizardData.ysrcPartner === 'yes') {
                    // At least one is a member - check which one they selected
                    const selectedMember = document.querySelector('input[name="ysrcMember"]:checked');
                    if (selectedMember && selectedMember.value === 'you' && wizardData.bowlsMembers.includes('you')) {
                        bowlsMembers.push('You');
                    } else if (selectedMember && selectedMember.value === 'partner' && wizardData.bowlsMembers.includes('partner')) {
                        bowlsMembers.push('Partner');
                    }
                }
                // If neither is a member, no bowls membership available (automatic selection)
            }
            
            if (bowlsMembers.length > 0) {
                summaryHTML += '<div style="margin-bottom: 15px;"><strong>Bowls Club Members:</strong> ' + bowlsMembers.join(', ') + '</div>';
            }
            
            summaryHTML += '</div>';
            
            document.getElementById('membershipSummary').innerHTML = summaryHTML;

            // Create forms list with clear visual indicators
            let formsHTML = '<div style="margin-top: 30px;">';
            
            // YSTC Tennis Club Forms
            formsHTML += '<div style="margin-bottom: 25px;"><h5 style="color: #2c3e50; margin-bottom: 15px;">🎾 YSTC Tennis Club Forms:</h5>';
            
            // Show each person who needs a tennis form
            if (wizardData.membershipType === 'couple') {
                formsHTML += `
                    <div style="background: #e8f5e8; border: 2px solid #4caf50; border-radius: 8px; padding: 15px; margin-bottom: 10px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="background: #4caf50; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold;">REQUIRED</span>
                            <strong>You & Partner:</strong> YSTC Membership Form (shared couple form)
                        </div>
                    </div>
                `;
            } else {
                formsHTML += `
                    <div style="background: #e8f5e8; border: 2px solid #4caf50; border-radius: 8px; padding: 15px; margin-bottom: 10px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="background: #4caf50; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold;">REQUIRED</span>
                            <strong>You:</strong> YSTC Membership Form
                        </div>
                    </div>
                `;
            }
            
            // Show children who need forms
            for (let i = 1; i <= wizardData.children; i++) {
                formsHTML += `
                    <div style="background: #e8f5e8; border: 2px solid #4caf50; border-radius: 8px; padding: 15px; margin-bottom: 10px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="background: #4caf50; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold;">REQUIRED</span>
                            <strong>Child ${i}:</strong> YSTC Membership Form
                        </div>
                    </div>
                `;
            }
            
                            // Download buttons for tennis forms
                formsHTML += `
                    <div style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <strong>Download YSTC Membership Forms:</strong>
                        <div style="margin-top: 10px;">
                            <a href="forms/membership_form.html" target="_blank" style="display: inline-block; background: #4caf50; color: white; padding: 8px 16px; text-decoration: none; border-radius: 4px; font-weight: 500; margin-right: 10px;">Fill Online Form</a>
                            <a href="https://drive.google.com/uc?export=download&id=1xwT6E7IQ6Vpjs_Gla8AdfF9sSZVr-xmn" target="_blank" style="display: inline-block; background: #2196f3; color: white; padding: 8px 16px; text-decoration: none; border-radius: 4px; font-weight: 500;">Download PDF</a>
                        </div>
                    </div>
                `;
            
            formsHTML += '</div>';
            
            // YSRC Club Forms
            formsHTML += '<div><h5 style="color: #2c3e50; margin-bottom: 15px;">🏟️ YSRC Club Forms:</h5>';
            
            let ysrcFormsNeeded = false;
            let ysrcFormsCount = 0;
            let ysrcPeopleList = [];
            
            results.people.forEach(person => {
                // Only require YSRC form if they need to pay joining fee (not already a member)
                if (person.joiningFee > 0) {
                    ysrcFormsNeeded = true;
                    ysrcFormsCount++;
                    ysrcPeopleList.push(person.name);
                }
            });
            
            // Special case: if neither partner is a YSRC member, the automatic selection still needs a YSRC form
            if (wizardData.membershipType === 'couple' && wizardData.ysrcPartner === 'no' && !ysrcFormsNeeded) {
                const cheaperPartner = (wizardData.yourAge === 'over60' || wizardData.partnerAge === 'over60') ? 
                    (wizardData.yourAge === 'over60' ? 'you' : 'partner') : 'you';
                const partnerName = cheaperPartner === 'you' ? 'You' : 'Partner';
                
                ysrcFormsNeeded = true;
                ysrcFormsCount = 1;
                ysrcPeopleList.push(partnerName);
            }
            
            if (ysrcFormsNeeded) {
                // Show each person who needs a YSRC form
                ysrcPeopleList.forEach(personName => {
                    formsHTML += `
                        <div style="background: #e8f5e8; border: 2px solid #4caf50; border-radius: 8px; padding: 15px; margin-bottom: 10px;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="background: #4caf50; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold;">REQUIRED</span>
                                <strong>${personName}:</strong> YSRC Application Form
                            </div>
                        </div>
                    `;
                });
                
                // Download button for YSRC forms
                formsHTML += `
                    <div style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <strong>Download YSRC Application Forms:</strong>
                        <div style="margin-top: 10px;">
                            <a href="https://docs.google.com/document/d/1vnLIhdmD81VhKJrJtrxHX1ECj14rYvvY/edit?usp=sharing&ouid=114896354047198025305&rtpof=true&sd=true" target="_blank" style="display: inline-block; background: #ff9800; color: white; padding: 8px 16px; text-decoration: none; border-radius: 4px; font-weight: 500;">Download YSRC Form</a>
                        </div>
                    </div>
                `;
            } else {
                formsHTML += `
                    <div style="background: #f0f0f0; border: 2px solid #ccc; border-radius: 8px; padding: 15px; margin-bottom: 10px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="background: #6c757d; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold;">NOT NEEDED</span>
                            <strong>No YSRC forms required</strong> - everyone is already a member or doesn't need YSRC membership
                        </div>
                    </div>
                `;
            }
            
            formsHTML += '</div></div>';
            
            document.getElementById('formsList').innerHTML = formsHTML;
        }

        // Close wizard when clicking outside
        document.getElementById('wizardOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                closeMembershipWizard();
            }
        });

        // ===== ANALYTICS TRACKING =====
        
        // Survey banner tracking
        function showSurveyBanner() {
            const banner = document.getElementById('surveyBanner');
            banner.classList.add('show');
            gtag('event', 'survey_banner_shown', {
                'event_category': 'engagement',
                'event_label': 'survey_banner'
            });
        }

        function closeSurveyBanner() {
            const banner = document.getElementById('surveyBanner');
            banner.classList.remove('show');
            gtag('event', 'survey_banner_closed', {
                'event_category': 'engagement',
                'event_label': 'survey_banner'
            });
        }

        function trackSurveyClick() {
            gtag('event', 'survey_link_clicked', {
                'event_category': 'engagement',
                'event_label': 'survey_banner',
                'value': 1
            });
        }

        function trackEventsLoaded() {
            gtag('event', 'events_iframe_loaded', {
                'event_category': 'engagement',
                'event_label': 'events_section'
            });
        }

        function trackBlogClick() {
            gtag('event', 'blog_link_clicked', {
                'event_category': 'navigation',
                'event_label': 'blog_section'
            });
        }

        // ===== INITIALIZATION =====
        
        // Initialize survey banner
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(showSurveyBanner, 3000);
        });
    </script>
</body>
</html>



